<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="pragma" content="no-cache"> 
    <meta http-equiv="Cache-Control " content="no-cache,must-revalidate"> 
    <meta name="description" content="">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
	<title>House</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}

		body {
			overflow: hidden;
		}

		#container {
			width: 100%;
			height: 100%;
			position: absolute;
		}
	</style>
</head>
<body>
<div id="container"></div>

<script src="./src/three.js"></script>
<script src="./src/Tween.js"></script>
<script>

	function App() {
		this.conW = window.innerWidth;
		this.conH = window.innerHeight;
		this.camera = new THREE.PerspectiveCamera(70, this.conW/this.conH, 1, 1000);
		this.scene = new THREE.Scene();
		this.renderer = new THREE.WebGLRenderer({antialias: true});
	}

	App.prototype.init = function() {
		var light = new THREE.PointLight(0xffffff, 1, 100);
		light.position.set(0, 0, 20);
		this.scene.add(light);
		this.camera.position.z = 6.667;

		var ball = new Ball();
		ball.init();
		this.scene.add(ball.group);
		ball.animate();

		this.renderer.setSize(this.conW, this.conH);
		document.body.appendChild(this.renderer.domElement);
	};

	App.prototype.update = function() {
		TWEEN.update();
	};

	function Ball() {
		this.group = new THREE.Object3D();
	}

	Ball.prototype.init = function() {
		var texture = new THREE.TextureLoader().load('./src/images/ball_texture.jpg'),
			geometry = new THREE.SphereGeometry(1, 32, 32),
			material = new THREE.MeshPhongMaterial({map: texture}),
			mesh = new THREE.Mesh(geometry, material);
		mesh.position.x = -3.333;
		this.group.add(mesh);
	};

	Ball.prototype.animate = function() {
		var newpos;
		if (this.group.position.x > 0) {
			newpos = this.group.position.x - 6.667;
		} else {
			newpos = this.group.position.x + 6.667;
		}

		new TWEEN.Tween(this.group.position).to({y: newpos}, 2000).start();
	};

	var app = new App();

	app.init();

	app.update();

</script>
</body>
</html>